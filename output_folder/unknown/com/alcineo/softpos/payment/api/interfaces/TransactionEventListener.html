<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>TransactionEventListener (Alcineo softpos)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TransactionEventListener (Alcineo softpos)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6,"i7":6,"i8":6,"i9":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.alcineo.softpos.payment.api.interfaces</a></div>
<h2 title="Interface TransactionEventListener" class="title">Interface TransactionEventListener</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>public interface <span class="typeNameLabel">TransactionEventListener</span></pre>
<div class="block">Provide interface necessary to process a transaction UI
 <p>
 This following linters is call following the transaction flow</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onBeep(com.alcineo.softpos.payment.model.beep.BeepStatus,int,int,int,int)">onBeep</a></span>&#8203;(<a href="../../model/beep/BeepStatus.html" title="enum in com.alcineo.softpos.payment.model.beep">BeepStatus</a>&nbsp;beepStatus,
      int&nbsp;frequence,
      int&nbsp;duration,
      int&nbsp;interval,
      int&nbsp;count)</code></th>
<td class="colLast">
<div class="block">Beeper request following EMV specification (cf EMVÂ® Contactless Specifications for Payment Systems # Chapter Audio Indication).</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onDekRequest(byte%5B%5D)">onDekRequest</a></span>&#8203;(byte[]&nbsp;dekData)</code></th>
<td class="colLast">
<div class="block">DEK request.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onDisplayLed(boolean%5B%5D,int,boolean,int,int)">onDisplayLed</a></span>&#8203;(boolean[]&nbsp;ledsStatus,
            int&nbsp;mode,
            boolean&nbsp;turnOn,
            int&nbsp;blinkOnDuration,
            int&nbsp;blinkOffDuration)</code></th>
<td class="colLast">
<div class="block">Display led during transaction.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onDisplayLogo(boolean)">onDisplayLogo</a></span>&#8203;(boolean&nbsp;isVisible)</code></th>
<td class="colLast">
<div class="block">Display EMV Contactless logo.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onDisplayPin()">onDisplayPin</a></span>()</code></th>
<td class="colLast">
<div class="block">Pin is request during transaction.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onDisplayText(java.lang.String)">onDisplayText</a></span>&#8203;(java.lang.String&nbsp;text)</code></th>
<td class="colLast">
<div class="block">Display message request by payment module.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onNotifyKernelId(com.alcineo.administrative.Kernel)">onNotifyKernelId</a></span>&#8203;(com.alcineo.administrative.Kernel&nbsp;kernel)</code></th>
<td class="colLast">
<div class="block">During transaction flow the payment library notify application which kernel is choose for transaction processing
 <code>Kernel</code>.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onOnlineRequest(byte%5B%5D)">onOnlineRequest</a></span>&#8203;(byte[]&nbsp;onlineData)</code></th>
<td class="colLast">
<div class="block">During transaction the online request can be required.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onTransactionFinish(com.alcineo.softpos.payment.model.transaction.TransactionResult)">onTransactionFinish</a></span>&#8203;(<a href="../../model/transaction/TransactionResult.html" title="class in com.alcineo.softpos.payment.model.transaction">TransactionResult</a>&nbsp;transactionResult)</code></th>
<td class="colLast">
<div class="block">Transaction finish with <a href="../../model/transaction/TransactionResult.html" title="class in com.alcineo.softpos.payment.model.transaction"><code>TransactionResult</code></a>, call when transaction is finish.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>java.util.List&lt;com.alcineo.utils.tlv.TlvItem&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onUpdateTagsBeforeKernelActivation(byte%5B%5D,com.alcineo.administrative.Kernel,java.util.List)">onUpdateTagsBeforeKernelActivation</a></span>&#8203;(byte[]&nbsp;AID,
                                  com.alcineo.administrative.Kernel&nbsp;kernelSelected,
                                  java.util.List&lt;com.alcineo.utils.tlv.TlvItem&gt;&nbsp;tags)</code></th>
<td class="colLast">
<div class="block">During the transaction, it is possible to overwrite a tag on the kernel side when the application is selected.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="onDisplayText(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onDisplayText</h4>
<pre class="methodSignature"><a href="https://developer.android.com/reference/androidx/annotation/UiThread.html?is-external=true" title="class or interface in androidx.annotation" class="externalLink">@UiThread</a>
void&nbsp;onDisplayText&#8203;(java.lang.String&nbsp;text)</pre>
<div class="block">Display message request by payment module.

 During transaction the EMV flow requiered to display message as describ on "GIVE GOOD EMV DOCUMENTATION"

 The language of message is manage by our payment library following EMV procedure to find language supported between
 card and payment library with language terminal settings (For now how this language settings is manage please refer
 to (REF TO DOC OF TERMINAL SETTINGS LANGUAGE)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>text</code> - message from payment module</dd>
</dl>
</li>
</ul>
<a id="onDisplayLed(boolean[],int,boolean,int,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onDisplayLed</h4>
<pre class="methodSignature"><a href="https://developer.android.com/reference/androidx/annotation/UiThread.html?is-external=true" title="class or interface in androidx.annotation" class="externalLink">@UiThread</a>
void&nbsp;onDisplayLed&#8203;(boolean[]&nbsp;ledsStatus,
                  int&nbsp;mode,
                  boolean&nbsp;turnOn,
                  int&nbsp;blinkOnDuration,
                  int&nbsp;blinkOffDuration)</pre>
<div class="block">Display led during transaction.

 In EMV we need to have 4 leds (cf. EMVÂ® Contactless Specifications for Payment Systems # chapter 9.3)
 <br>
 Example of Implementation:
 <pre><code>
      public void onDisplayLed(boolean[] ledsStatus, int mode, boolean turnOn, int blinkOnDuration,
              int blinkOffDuration) {
          if (blinkOffDuration != 0) {
              return;
          }

          for (int ledId = 0; ledId &lt; transactionLeds.size(); ledId++) {
              // If status is FALSE the LED is not concerned by the command
              if (!ledsStatus[ledId]) {
                  continue;
              }

              if (turnOn) {
                  transactionLeds.get(ledId).setBackgroundColor((mode == 1) ? MODE1_ON[ledId] : MODE2_ON[ledId]);
              } else {
                  transactionLeds.get(ledId).setBackgroundColor(Color.BLACK);
              }
              transactionLedList.postValue(transactionLeds);
          }
      }
 </code></pre>


 Each led have a signification and the process to display is</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ledsStatus</code> - array of led status (if ledsStatus[i] == TRUE you need to apply turnOn boolean). The size of
                         ledsStatus is 4.</dd>
<dd><code>mode</code> - choice between mode 1 (color of led : green green green green) of mode 2 (color of led : green
                         yellow blue red)</dd>
<dd><code>turnOn</code> - if true the led must be turn on, else (false) the led</dd>
<dd><code>blinkOnDuration</code> - Led fix blinks parameters is 0 else apply blinking on ledsStatus[i] = true</dd>
<dd><code>blinkOffDuration</code> - Led fix blinks parameters is 0 else apply blinking off ledsStatus[i] = true</dd>
</dl>
</li>
</ul>
<a id="onDisplayPin()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onDisplayPin</h4>
<pre class="methodSignature"><a href="https://developer.android.com/reference/androidx/annotation/UiThread.html?is-external=true" title="class or interface in androidx.annotation" class="externalLink">@UiThread</a>
void&nbsp;onDisplayPin()</pre>
<div class="block">Pin is request during transaction.</div>
</li>
</ul>
<a id="onDisplayLogo(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onDisplayLogo</h4>
<pre class="methodSignature"><a href="https://developer.android.com/reference/androidx/annotation/UiThread.html?is-external=true" title="class or interface in androidx.annotation" class="externalLink">@UiThread</a>
void&nbsp;onDisplayLogo&#8203;(boolean&nbsp;isVisible)</pre>
<div class="block">Display EMV Contactless logo.

 The contactless logo must be display when the field is activated.
 It must by in center of field (following specification TODO find it)
 For SoftPOS solution you can display on screen of phone.
 Please follow (cf TODO) for have more information about this specific contactless logo.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>isVisible</code> - true = display logo, false = remove (hide) logo</dd>
</dl>
</li>
</ul>
<a id="onBeep(com.alcineo.softpos.payment.model.beep.BeepStatus,int,int,int,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onBeep</h4>
<pre class="methodSignature"><a href="https://developer.android.com/reference/androidx/annotation/UiThread.html?is-external=true" title="class or interface in androidx.annotation" class="externalLink">@UiThread</a>
void&nbsp;onBeep&#8203;(<a href="../../model/beep/BeepStatus.html" title="enum in com.alcineo.softpos.payment.model.beep">BeepStatus</a>&nbsp;beepStatus,
            int&nbsp;frequence,
            int&nbsp;duration,
            int&nbsp;interval,
            int&nbsp;count)</pre>
<div class="block">Beeper request following EMV specification (cf EMVÂ® Contactless Specifications for Payment Systems # Chapter Audio Indication).

 You need to implement beep action.
 You have a example of our implementation on SoundGenerator.java class in BonAppetit android application</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>beepStatus</code> - Status of beep <a href="../../model/beep/BeepStatus.html" title="enum in com.alcineo.softpos.payment.model.beep"><code>BeepStatus</code></a></dd>
<dd><code>frequence</code> - Frequense of beep</dd>
<dd><code>duration</code> - Bepper time sound on</dd>
<dd><code>interval</code> - Interval between two beep</dd>
<dd><code>count</code> - Number of beep + interval</dd>
</dl>
</li>
</ul>
<a id="onTransactionFinish(com.alcineo.softpos.payment.model.transaction.TransactionResult)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onTransactionFinish</h4>
<pre class="methodSignature">void&nbsp;onTransactionFinish&#8203;(<a href="../../model/transaction/TransactionResult.html" title="class in com.alcineo.softpos.payment.model.transaction">TransactionResult</a>&nbsp;transactionResult)</pre>
<div class="block">Transaction finish with <a href="../../model/transaction/TransactionResult.html" title="class in com.alcineo.softpos.payment.model.transaction"><code>TransactionResult</code></a>, call when transaction is finish.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>transactionResult</code> - transaction information</dd>
</dl>
</li>
</ul>
<a id="onOnlineRequest(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onOnlineRequest</h4>
<pre class="methodSignature">byte[]&nbsp;onOnlineRequest&#8203;(byte[]&nbsp;onlineData)</pre>
<div class="block">During transaction the online request can be required.

 When this function is call you need to send data to server of bank for have the result of transaction.
 The online date is on TLV format.
 For know the tags contains in this buffer please refers to TODO doc of cipher data</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>onlineData</code> - The data should be send to server for online validation</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Online response (in hexa format), for example 8A023030</dd>
</dl>
</li>
</ul>
<a id="onDekRequest(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onDekRequest</h4>
<pre class="methodSignature">void&nbsp;onDekRequest&#8203;(byte[]&nbsp;dekData)</pre>
<div class="block">DEK request.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dekData</code> - dek need to send to server</dd>
</dl>
</li>
</ul>
<a id="onNotifyKernelId(com.alcineo.administrative.Kernel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onNotifyKernelId</h4>
<pre class="methodSignature">void&nbsp;onNotifyKernelId&#8203;(com.alcineo.administrative.Kernel&nbsp;kernel)</pre>
<div class="block">During transaction flow the payment library notify application which kernel is choose for transaction processing
 <code>Kernel</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>kernel</code> - kernel selected</dd>
</dl>
</li>
</ul>
<a id="onUpdateTagsBeforeKernelActivation(byte[],com.alcineo.administrative.Kernel,java.util.List)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>onUpdateTagsBeforeKernelActivation</h4>
<pre class="methodSignature">java.util.List&lt;com.alcineo.utils.tlv.TlvItem&gt;&nbsp;onUpdateTagsBeforeKernelActivation&#8203;(byte[]&nbsp;AID,
                                                                                 com.alcineo.administrative.Kernel&nbsp;kernelSelected,
                                                                                 java.util.List&lt;com.alcineo.utils.tlv.TlvItem&gt;&nbsp;tags)</pre>
<div class="block">During the transaction, it is possible to overwrite a tag on the kernel side when the application is selected.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>AID</code> - AID selected</dd>
<dd><code>kernelSelected</code> - kernel selected</dd>
<dd><code>tags</code> - List of TLV tags construct from DFDF36 defined in kernel terminals settings.
             If DFDF36 tags is not present on Terminals settings this value is null.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>List of tag in tlv format who should be overwritted
         null is a possible value if no tag must be overwrite</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
